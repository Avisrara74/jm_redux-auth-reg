(this["webpackJsonpjm_redux-auth-reg"]=this["webpackJsonpjm_redux-auth-reg"]||[]).push([[0],{100:function(e,t,a){},161:function(e,t,a){e.exports=a(240)},166:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(29),i=a.n(s),c=(a(166),a(10)),o=a(140),u=a(41),l=a(26);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=a(4),d=a(118),p=a(14),f=a.n(p),h=a(42),b=a(245),O=a(77),v=a(158),E=a(111),j=a.n(E),g="https://conduit.productionready.io/api/",S="".concat(g,"users"),w="".concat(g,"users/login"),k=function(e,t){Object.entries(e).forEach((function(e){var a=Object(v.a)(e,2),n=a[0],r=a[1];t.setFieldError(n,r),t.setSubmitting(!1)}))},N=function(e){"Network Error"===e.message&&alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f")},I=function(e,t){Object.keys(e).length>0&&(t.setFieldError("email","\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),t.setFieldError("password","\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),t.setSubmitting(!1))},y={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},json:!0},A=function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j()(Object(O.a)(Object(O.a)({},y),{},{data:JSON.stringify(t),url:w}));case 3:return n=e.sent,r=n.data.user,e.abrupt("return",{username:r.username,token:r.token,isAuthorized:!0});case 8:throw e.prev=8,e.t0=e.catch(0),N(e.t0),I(e.t0.response.data.errors,a),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j()(Object(O.a)(Object(O.a)({},y),{},{data:JSON.stringify(t),url:S}));case 3:alert("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),a.resetForm(),e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(0),N(e.t0),k(e.t0.response.data.errors,a),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),U=Object(b.a)("SIGN_UP_REQUEST"),z=Object(b.a)("SIGN_UP_SUCCESS"),C=Object(b.a)("SIGN_UP_FAILURE"),q=Object(b.a)("LOG_IN_REQUEST"),_=Object(b.a)("LOG_IN_SUCCESS"),P=Object(b.a)("LOG_IN_FAILURE"),D=Object(b.a)("LOGOUT_SUCCESS"),F=(a(100),a(101),{logOutSuccess:D}),R=function(e){var t=e.logOutSuccess,a=e.username;return r.a.createElement("div",{className:"home"},r.a.createElement("span",{className:"home-title"},"\u041f\u0440\u0438\u0432\u0435\u0442, ".concat(a)),r.a.createElement(d.a,{className:"home-logout",type:"primary",onClick:function(){t()}},"\u0412\u044b\u0445\u043e\u0434"))};R.defaultProps={logOutSuccess:null,username:""};var G=Object(c.b)((function(e){return{username:e.userData.username}}),F)(R),T=a(92),L=a(244),J=a(246),B=a(247),Q={email:"",password:""},V={signIn:function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(n){var r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(q()),a.prev=1,a.next=4,A(e,t);case 4:r=a.sent,n(_(r)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),n(P());case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}},W=function(e){var t=e.isInputsDisable,a=e.signIn,n=Object(T.a)({initialValues:Q,onSubmit:function(){!function(e){var t=e.values,n=t.email,r=t.password;a({user:{email:n,password:r}},e)}(n)}});return r.a.createElement("form",{onSubmit:n.handleSubmit,className:"form"},r.a.createElement("div",{className:"form-title"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement("label",{htmlFor:"email",className:"form-item"},"\u041f\u043e\u0447\u0442\u0430:",r.a.createElement(L.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Email",id:"email",name:"email",onChange:n.handleChange,value:n.values.email,disabled:t}),n.touched.email&&n.errors.email?r.a.createElement("div",{className:"form-item-error"},n.errors.email):null),r.a.createElement("label",{htmlFor:"password",className:"form-item"},"\u041f\u0430\u0440\u043e\u043b\u044c:",r.a.createElement(L.a.Password,{id:"password",name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041f\u0430\u0440\u043e\u043b\u044c",onChange:n.handleChange,value:n.values.password,iconRender:function(e){return e?r.a.createElement(J.a,null):r.a.createElement(B.a,null)},disabled:t}),n.touched.password&&n.errors.password?r.a.createElement("div",{className:"form-item-error"},n.errors.password):null),r.a.createElement("div",{className:"form-item"},r.a.createElement(d.a,{type:"primary",htmlType:"submit",className:"form-submit",onClick:n.handleSubmit,disabled:t},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(l.b,{to:"sign-up",className:"form-link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))};W.defaultProps={signIn:null,isInputsDisable:!1};var Z=Object(c.b)((function(e){return{isInputsDisable:"requested"===e.signInState}}),V)(W),$=a(79),H=a(53),K={username:"",email:"",password:"",repeatPassword:""},M=[{id:Object($.uniqueId)(),title:"\u041b\u043e\u0433\u0438\u043d:",name:"username",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"},{id:Object($.uniqueId)(),title:"\u041f\u043e\u0447\u0442\u0430:",name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"},{id:Object($.uniqueId)(),title:"\u041f\u0430\u0440\u043e\u043b\u044c:",name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},{id:Object($.uniqueId)(),title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:",name:"repeatPassword",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}],X=H.a({username:H.c().max(30,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u044b\u0439 \u043d\u0438\u043a!").required("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"),email:H.c().email("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email").required("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"),password:H.c().min(8,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439").max(50,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u044b\u0439").matches(/^[A-Za-z0-9]+$/,"\u041f\u0430\u0440\u043e\u043b\u044c \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0438 \u0446\u0438\u0444\u0440\u044b").matches(/(?=.*[0-9])/,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u0446\u0438\u0444\u0440\u0443").matches(/(?=.*[A-Z])/,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0431\u0443\u043a\u0432\u0443").required("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"),repeatPassword:H.c().oneOf([H.b("password"),null],"\u041f\u0430\u0440\u043e\u043b\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c").required("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435")}),Y={signUp:function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(U()),a.prev=1,a.next=4,x(e,t);case 4:n(z()),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),n(C());case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()}},ee=function(e){var t=e.signUp,a=e.isSignUpRequestSuccess,n=e.isInputsDisable,s=function(){var e=Object(h.a)(f.a.mark((function e(a){var n,r,s,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.values,r=n.username,s=n.email,i=n.password,t({user:{username:r,email:s,password:i}},a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=Object(T.a)({initialValues:K,validationSchema:X,onSubmit:function(){s(i)}});return r.a.createElement("form",{onSubmit:i.handleSubmit,className:"form"},r.a.createElement("div",{className:"form-title"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),M.map((function(e){return r.a.createElement("label",{key:e.id,htmlFor:e.name,className:"form-item"},e.title,r.a.createElement(L.a,{type:"password"===e.name||"repeatPassword"===e.name?"password":"text",placeholder:e.placeholder,id:e.name,name:e.name,onChange:i.handleChange,value:i.values[e.name],disabled:n}),i.touched[e.name]&&i.errors[e.name]?r.a.createElement("div",{className:"form-item-error"},i.errors[e.name]):null)})),r.a.createElement("div",{className:"form-item"},r.a.createElement(d.a,{htmlType:"submit",type:"primary",className:"form-submit",onClick:i.handleSubmit,disabled:n},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.a.createElement(l.b,{to:"/sign-in",className:"form-link"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"),a?r.a.createElement(m.a,{to:"sign-in"}):null))};ee.defaultProps={signUp:null,isInputsDisable:!1,isSignUpRequestSuccess:!1};var te=Object(c.b)((function(e){var t=e.signUpState;return{isInputsDisable:"requested"===t,isSignUpRequestSuccess:"finished"===t}}),Y)(ee),ae=a(95),ne=Object(c.b)((function(e){return{isAuthorized:e.userData.isAuthorized}}),null)((function(e){var t=e.component,a=e.isAuthorized,n=Object(ae.a)(e,["component","isAuthorized"]);return r.a.createElement(m.b,Object.assign({},n,{render:function(){return a?r.a.createElement(t,e):r.a.createElement(m.a,{to:"/sign-in"})}}))})),re=Object(c.b)((function(e){return{isAuthorized:e.userData.isAuthorized}}),null)((function(e){var t=e.component,a=e.isAuthorized,n=Object(ae.a)(e,["component","isAuthorized"]);return r.a.createElement(m.b,Object.assign({},n,{render:function(){return a?r.a.createElement(m.a,{to:"/"}):r.a.createElement(t,e)}}))})),se=(a(239),{signInSuccess:_}),ie=function(e){var t=e.dispatch,a=e.isAuthorized;return Object(n.useEffect)((function(){void 0!==localStorage.token&&t(_({isAuthorized:!0,token:localStorage.token,username:localStorage.username}))}),[a]),r.a.createElement(l.a,null,r.a.createElement(m.d,null,r.a.createElement(ne,{path:"/",exact:!0,component:G}),r.a.createElement(re,{path:"/sign-in",component:Z}),r.a.createElement(re,{path:"/sign-up",component:te}),r.a.createElement(m.a,{to:"/sign-in"})))};ie.defaultProps={dispatch:null,isAuthorized:!1};var ce,oe,ue,le=Object(c.b)((function(e){var t=e.userData;return{isAuthorized:t.isAuthorized,userData:t}}),se)(ie),me=a(24),de=a(242),pe=function(e,t){localStorage.setItem(String(e),String(t))},fe=function(e){localStorage.removeItem(e)},he=Object(de.a)((ce={},Object(me.a)(ce,U,(function(){return"requested"})),Object(me.a)(ce,C,(function(){return"failed"})),Object(me.a)(ce,z,(function(){return"finished"})),ce),"none"),be=Object(de.a)((oe={},Object(me.a)(oe,q,(function(){return"requested"})),Object(me.a)(oe,P,(function(){return"failed"})),Object(me.a)(oe,_,(function(){return"finished"})),oe),"none"),Oe={username:"",token:"",isAuthorized:!1},ve=Object(de.a)((ue={},Object(me.a)(ue,_,(function(e,t){var a=t.payload,n=a.username,r=a.token,s=a.isAuthorized;return pe("token",r),pe("username",n),{username:n,token:r,isAuthorized:s}})),Object(me.a)(ue,D,(function(){return fe("token"),fe("username"),Oe})),ue),Oe),Ee=Object(u.c)({signUpState:he,signInState:be,userData:ve}),je=Object(u.e)(Ee,Object(u.d)(Object(u.a)(o.a)));i.a.render(r.a.createElement(c.a,{store:je},r.a.createElement(l.a,null,r.a.createElement(le,{dispatch:je.dispatch}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[161,1,2]]]);
//# sourceMappingURL=main.ab1b9af8.chunk.js.map